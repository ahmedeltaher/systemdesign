<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>شرح Consistent Hashing - بالعامية المصرية</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #8e44ad 0%, #3498db 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .cards-grid {
            display: flex;
            flex-direction: column;
            gap: 25px;
            margin-bottom: 30px;
            max-width: 900px;
            margin: 0 auto 30px auto;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border-left: 5px solid;
            width: 100%;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .card.intro { border-left-color: #e74c3c; }
        .card.problem { border-left-color: #e67e22; }
        .card.concept { border-left-color: #3498db; }
        .card.how-it-works { border-left-color: #9b59b6; }
        .card.virtual-nodes { border-left-color: #f39c12; }
        .card.benefits { border-left-color: #27ae60; }
        .card.applications { border-left-color: #1abc9c; }
        .card.best-practices { border-left-color: #34495e; }

        .card-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            text-align: center;
        }

        .card.intro .card-icon { color: #e74c3c; }
        .card.problem .card-icon { color: #e67e22; }
        .card.concept .card-icon { color: #3498db; }
        .card.how-it-works .card-icon { color: #9b59b6; }
        .card.virtual-nodes .card-icon { color: #f39c12; }
        .card.benefits .card-icon { color: #27ae60; }
        .card.applications .card-icon { color: #1abc9c; }
        .card.best-practices .card-icon { color: #34495e; }

        .card h2 {
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .card p {
            line-height: 1.6;
            color: #34495e;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .example-box {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #3498db;
        }

        .highlight {
            background: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #ffeaa7;
            margin: 15px 0;
        }

        .warning-box {
            background: #f8d7da;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #f5c6cb;
            margin: 15px 0;
            border-left: 4px solid #e74c3c;
        }

        .success-box {
            background: #d4f4dd;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #c3e6cb;
            margin: 15px 0;
            border-left: 4px solid #27ae60;
        }

        /* Hash Ring Visualization */
        .hash-ring-container {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            text-align: center;
        }

        .hash-ring {
            width: 300px;
            height: 300px;
            border: 4px solid #3498db;
            border-radius: 50%;
            margin: 20px auto;
            position: relative;
            background: linear-gradient(45deg, #ecf0f1 25%, transparent 25%), 
                        linear-gradient(-45deg, #ecf0f1 25%, transparent 25%), 
                        linear-gradient(45deg, transparent 75%, #ecf0f1 75%), 
                        linear-gradient(-45deg, transparent 75%, #ecf0f1 75%);
            background-size: 20px 20px;
            background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
        }

        .hash-ring-label {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
            color: #3498db;
            font-size: 1.2rem;
            background: white;
            padding: 10px;
            border-radius: 50%;
            border: 2px solid #3498db;
        }

        .ring-element {
            position: absolute;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 0.9rem;
        }

        .server-node {
            background: #e74c3c;
            border: 3px solid #c0392b;
        }

        .request-node {
            background: #27ae60;
            border: 3px solid #229954;
        }

        .virtual-node {
            background: #f39c12;
            border: 3px solid #e67e22;
            width: 30px;
            height: 30px;
            font-size: 0.7rem;
        }

        /* Comparison Tables */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .comparison-table th {
            background: #3498db;
            color: white;
            padding: 15px;
            text-align: center;
            font-size: 1.1rem;
        }

        .comparison-table td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #ecf0f1;
        }

        .comparison-table tr:nth-child(even) {
            background: #f8f9fa;
        }

        .good {
            background: #d4f4dd !important;
            color: #27ae60;
            font-weight: bold;
        }

        .bad {
            background: #f8d7da !important;
            color: #e74c3c;
            font-weight: bold;
        }

        /* Code blocks */
        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            direction: ltr;
            text-align: left;
            overflow-x: auto;
        }

        /* Flow diagrams */
        .flow-diagram {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
            direction: ltr;
        }

        .flow-step {
            display: inline-block;
            background: #3498db;
            color: white;
            padding: 10px 15px;
            border-radius: 20px;
            margin: 5px;
            font-weight: bold;
        }

        .flow-step.problem { background: #e74c3c; }
        .flow-step.solution { background: #27ae60; }
        .flow-step.hash { background: #9b59b6; }

        .arrow {
            font-size: 1.5rem;
            color: #3498db;
            margin: 0 10px;
        }

        /* Applications grid */
        .applications-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .application-item {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #1abc9c;
            text-align: center;
        }

        .application-item i {
            font-size: 2rem;
            color: #1abc9c;
            margin-bottom: 10px;
            display: block;
        }

        .application-item h4 {
            color: #1abc9c;
            margin-bottom: 8px;
        }

        /* Benefits list */
        .benefits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .benefit-item {
            background: #d4f4dd;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #27ae60;
            text-align: center;
        }

        .benefit-item i {
            font-size: 2rem;
            color: #27ae60;
            margin-bottom: 10px;
            display: block;
        }

        .benefit-item h4 {
            color: #27ae60;
            margin-bottom: 8px;
        }

        @media (max-width: 768px) {
            .cards-grid {
                max-width: 100%;
                padding: 0 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .card {
                padding: 20px;
            }

            .hash-ring {
                width: 250px;
                height: 250px;
            }

            .comparison-table {
                font-size: 0.9rem;
            }
        }

        .emoji {
            font-size: 1.2em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🔄 شرح Consistent Hashing بالعامية المصرية</h1>
            <p>تعالى نفهم إزاي نحل مشكلة إعادة التوزيع في الـ Distributed Systems! 🚀</p>
        </div>

        <div class="cards-grid">
            <!-- مقدمة عن Consistent Hashing -->
            <div class="card intro">
                <div class="card-icon">
                    <i class="fas fa-sync-alt"></i>
                </div>
                <h2>إيه هو Consistent Hashing؟ 🤔</h2>
                <p><strong>تخيل معايا:</strong> عندك مطعم والطباخين بيشتغلوا بنظام، كل طباخ مسؤول عن أرقام طلبات معينة!</p>
                
                <div class="example-box">
                    <strong>المثال التقليدي:</strong><br>
                    🍕 الطلب رقم 15 → 15 % 3 طباخين = الطباخ رقم 0<br>
                    🍝 الطلب رقم 16 → 16 % 3 طباخين = الطباخ رقم 1<br>
                    🍔 الطلب رقم 17 → 17 % 3 طباخين = الطباخ رقم 2
                </div>
                
                <div class="warning-box">
                    <strong>⚠️ المشكلة:</strong> لو طباخ جديد انضم أو طباخ مشي، كل الحسابات هتتغير! هنحتاج نعيد توزيع كل الطلبات!
                </div>
                
                <p><strong>Consistent Hashing</strong> ده حل ذكي يخلينا نضيف أو نشيل servers من غير ما نأثر على كل البيانات!</p>
                
                <div class="highlight">
                    <strong>🎯 الهدف:</strong> نقلل إعادة التوزيع لأقل حد ممكن عند إضافة أو إزالة servers!
                </div>
            </div>

            <!-- المشكلة مع الـ Traditional Hashing -->
            <div class="card problem">
                <div class="card-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h2>مشكلة Traditional Hashing 🚨</h2>
                <p>تعالى نشوف إيه المشكلة مع الطريقة العادية للـ hashing:</p>
                
                <div class="flow-diagram">
                    <div class="flow-step">Key</div>
                    <span class="arrow">→</span>
                    <div class="flow-step hash">Hash Function</div>
                    <span class="arrow">→</span>
                    <div class="flow-step">Modulus % N</div>
                    <span class="arrow">→</span>
                    <div class="flow-step">Server Index</div>
                </div>
                
                <div class="code-block">
                    // Traditional Hashing
                    function getServer(key, numServers) {
                        return hash(key) % numServers;
                    }
                    
                    // مشكلة: لو numServers اتغير، كل حاجة هتتغير!
                </div>
                
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>السيناريو</th>
                            <th>عدد الـ Servers</th>
                            <th>البيانات اللي هتتحرك</th>
                            <th>التأثير</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>الوضع الحالي</td>
                            <td>3 servers</td>
                            <td>0%</td>
                            <td class="good">مستقر</td>
                        </tr>
                        <tr>
                            <td>إضافة server جديد</td>
                            <td>4 servers</td>
                            <td class="bad">75%</td>
                            <td class="bad">كارثة!</td>
                        </tr>
                        <tr>
                            <td>إزالة server</td>
                            <td>2 servers</td>
                            <td class="bad">66%</td>
                            <td class="bad">كارثة!</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="warning-box">
                    <strong>💥 النتيجة:</strong> أي تغيير في عدد الـ servers يخلي معظم البيانات تحتاج إعادة توزيع! ده مكلف جداً في الوقت والموارد!
                </div>
            </div>

            <!-- مفهوم الـ Hash Ring -->
            <div class="card concept">
                <div class="card-icon">
                    <i class="fas fa-circle-notch"></i>
                </div>
                <h2>مفهوم الـ Hash Ring 🎯</h2>
                <p>Consistent Hashing بيستخدم مفهوم الـ "Hash Ring" - تعالى نفهمه:</p>
                
                <div class="hash-ring-container">
                    <h4>Hash Ring من 0 إلى 255</h4>
                    <div class="hash-ring">
                        <div class="hash-ring-label">Hash Ring</div>
                        <!-- Servers -->
                        <div class="ring-element server-node" style="top: 10px; right: 130px;">A</div>
                        <div class="ring-element server-node" style="bottom: 50px; right: 50px;">B</div>
                        <div class="ring-element server-node" style="bottom: 50px; left: 50px;">C</div>
                        <!-- Requests -->
                        <div class="ring-element request-node" style="top: 50px; right: 80px;">R1</div>
                        <div class="ring-element request-node" style="right: 20px; top: 130px;">R2</div>
                        <div class="ring-element request-node" style="bottom: 20px; right: 100px;">R3</div>
                        <div class="ring-element request-node" style="bottom: 80px; left: 20px;">R4</div>
                        <div class="ring-element request-node" style="left: 80px; top: 80px;">R5</div>
                    </div>
                    <p><span style="color: #e74c3c;">🔴</span> Servers | <span style="color: #27ae60;">🟢</span> Requests</p>
                </div>
                
                <div class="example-box">
                    <strong>إزاي يشتغل:</strong><br>
                    1. كل server وrequest يتحطوا على الـ ring حسب الـ hash value<br>
                    2. كل request يدور clockwise لحد ما يلاقي أول server<br>
                    3. الـ server ده هو اللي هيخدم الـ request ده
                </div>
                
                <div class="flow-diagram">
                    <div class="flow-step">Request IP</div>
                    <span class="arrow">→</span>
                    <div class="flow-step hash">Hash Function</div>
                    <span class="arrow">→</span>
                    <div class="flow-step">Position على الـ Ring</div>
                    <span class="arrow">→</span>
                    <div class="flow-step">أول Server clockwise</div>
                </div>
                
                <div class="highlight">
                    <strong>💡 الفكرة الذكية:</strong> لما نضيف أو نشيل server، بس الـ requests اللي جنبه هما اللي هيتأثروا!
                </div>
            </div>

            <!-- إزاي يشتغل عملياً -->
            <div class="card how-it-works">
                <div class="card-icon">
                    <i class="fas fa-cogs"></i>
                </div>
                <h2>إزاي يشتغل عملياً؟ ⚙️</h2>
                <p>تعالى نشوف خطوة بخطوة إزاي الـ Consistent Hashing بيشتغل:</p>
                
                <div class="example-box">
                    <strong>مثال عملي:</strong><br>
                    عندنا 3 servers: A, B, C<br>
                    وعندنا 5 requests بـ IP addresses مختلفة
                </div>
                
                <div class="code-block">
                    // خطوات العمل
                    1. Hash كل server IP ونحطه على الـ ring
                       Server A → hash(A_IP) = 50
                       Server B → hash(B_IP) = 120  
                       Server C → hash(C_IP) = 200
                    
                    2. Hash كل request ونحطه على الـ ring
                       Request 1 → hash(R1_IP) = 30
                       Request 2 → hash(R2_IP) = 80
                       Request 3 → hash(R3_IP) = 150
                       Request 4 → hash(R4_IP) = 180
                       Request 5 → hash(R5_IP) = 220
                    
                    3. كل request يدور clockwise لأول server
                       R1 (30) → Server A (50)
                       R2 (80) → Server B (120)
                       R3 (150) → Server C (200)
                       R4 (180) → Server C (200)
                       R5 (220) → Server A (50) // wrap around
                </div>
                
                <div class="success-box">
                    <strong>✅ إضافة Server جديد:</strong><br>
                    لو ضفنا Server D عند position 90:<br>
                    • R2 بس هو اللي هيتأثر (هيروح لـ D بدل B)<br>
                    • باقي الـ requests مش هتتغير!<br>
                    • بس 20% من البيانات اتحركت بدل 75%!
                </div>
                
                <div class="success-box">
                    <strong>✅ إزالة Server:</strong><br>
                    لو شلنا Server B:<br>
                    • R2 بس هو اللي هيتأثر (هيروح لـ C)<br>
                    • باقي الـ requests زي ما هما!
                </div>
            </div>

            <!-- Virtual Nodes -->
            <div class="card virtual-nodes">
                <div class="card-icon">
                    <i class="fas fa-layer-group"></i>
                </div>
                <h2>Virtual Nodes - حل مشكلة عدم التوازن 🎭</h2>
                <p>مشكلة: لو عندك servers قليلة، ممكن يحصل توزيع مش متوازن! الحل: Virtual Nodes!</p>
                
                <div class="warning-box">
                    <strong>⚠️ المشكلة:</strong> لو عندك server واحد يخدم 70% من الـ requests والتاني 30%؟ ده مش عدل!
                </div>
                
                <div class="hash-ring-container">
                    <h4>Virtual Nodes في العمل</h4>
                    <div class="hash-ring">
                        <div class="hash-ring-label">Virtual Ring</div>
                        <!-- Virtual nodes for each server -->
                        <div class="ring-element virtual-node" style="top: 10px; right: 130px;">A1</div>
                        <div class="ring-element virtual-node" style="top: 60px; left: 60px;">A2</div>
                        <div class="ring-element virtual-node" style="bottom: 30px; left: 130px;">A3</div>
                        
                        <div class="ring-element virtual-node" style="right: 20px; top: 100px;">B1</div>
                        <div class="ring-element virtual-node" style="bottom: 10px; right: 80px;">B2</div>
                        <div class="ring-element virtual-node" style="left: 20px; top: 140px;">B3</div>
                        
                        <div class="ring-element virtual-node" style="top: 120px; left: 20px;">C1</div>
                        <div class="ring-element virtual-node" style="bottom: 80px; right: 30px;">C2</div>
                        <div class="ring-element virtual-node" style="bottom: 140px; left: 80px;">C3</div>
                    </div>
                    <p><span style="color: #f39c12;">🟡</span> Virtual Nodes لكل Server</p>
                </div>
                
                <div class="example-box">
                    <strong>الفكرة:</strong><br>
                    • كل server حقيقي يتمثل بعدة virtual nodes على الـ ring<br>
                    • كل virtual node له hash مختلف<br>
                    • كده التوزيع يبقى أكتر توازناً
                </div>
                
                <div class="code-block">
                    // مثال على Virtual Nodes
                    function getVirtualNodes(serverIP, replicaCount) {
                        const virtualNodes = [];
                        for (let i = 0; i < replicaCount; i++) {
                            const virtualKey = serverIP + ":" + i;
                            virtualNodes.push({
                                server: serverIP,
                                hash: hash(virtualKey),
                                replica: i
                            });
                        }
                        return virtualNodes;
                    }
                    
                    // عادة نستخدم 100-200 virtual node لكل server
                </div>
                
                <div class="highlight">
                    <strong>💡 الفايدة:</strong> كلما زودنا Virtual Nodes، كلما قل الاختلاف في التوزيع بين الـ servers!
                </div>
            </div>

            <!-- الفوائد -->
            <div class="card benefits">
                <div class="card-icon">
                    <i class="fas fa-trophy"></i>
                </div>
                <h2>إيه الفوائد؟ 🏆</h2>
                <p>Consistent Hashing يحل مشاكل كتيرة في الـ distributed systems:</p>
                
                <div class="benefits-grid">
                    <div class="benefit-item">
                        <i class="fas fa-chart-line"></i>
                        <h4>Minimal Redistribution</h4>
                        <p>بس K/N من البيانات بتتحرك عند التغيير</p>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-balance-scale"></i>
                        <h4>Load Balance</h4>
                        <p>توزيع متوازن مع Virtual Nodes</p>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-expand-arrows-alt"></i>
                        <h4>Scalability</h4>
                        <p>سهولة إضافة وإزالة servers</p>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-shield-alt"></i>
                        <h4>Fault Tolerance</h4>
                        <p>مقاومة أعطال الـ servers</p>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-rocket"></i>
                        <h4>Performance</h4>
                        <p>أداء سريع للـ lookups</p>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-cogs"></i>
                        <h4>Simplicity</h4>
                        <p>بسيط في التنفيذ والفهم</p>
                    </div>
                </div>
                
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>الخاصية</th>
                            <th>Traditional Hashing</th>
                            <th>Consistent Hashing</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>البيانات المتحركة عند إضافة server</td>
                            <td class="bad">N/(N+1) ≈ 75%</td>
                            <td class="good">1/(N+1) ≈ 25%</td>
                        </tr>
                        <tr>
                            <td>البيانات المتحركة عند إزالة server</td>
                            <td class="bad">(N-1)/N ≈ 66%</td>
                            <td class="good">1/N ≈ 33%</td>
                        </tr>
                        <tr>
                            <td>Load Balance</td>
                            <td class="good">Perfect</td>
                            <td class="good">Good مع Virtual Nodes</td>
                        </tr>
                        <tr>
                            <td>Lookup Time</td>
                            <td class="good">O(1)</td>
                            <td class="good">O(log N)</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- التطبيقات العملية -->
            <div class="card applications">
                <div class="card-icon">
                    <i class="fas fa-rocket"></i>
                </div>
                <h2>التطبيقات العملية 🚀</h2>
                <p>شوف فين Consistent Hashing بيتستخدم في الشركات الكبيرة:</p>
                
                <div class="applications-grid">
                    <div class="application-item">
                        <i class="fas fa-database"></i>
                        <h4>Distributed Caching</h4>
                        <p>Memcached, Redis Cluster</p>
                    </div>
                    <div class="application-item">
                        <i class="fas fa-hdd"></i>
                        <h4>Distributed Storage</h4>
                        <p>Amazon S3, Cassandra</p>
                    </div>
                    <div class="application-item">
                        <i class="fas fa-balance-scale"></i>
                        <h4>Load Balancing</h4>
                        <p>توزيع الطلبات على الـ servers</p>
                    </div>
                    <div class="application-item">
                        <i class="fas fa-share-alt"></i>
                        <h4>CDN</h4>
                        <p>Akamai, CloudFlare</p>
                    </div>
                    <div class="application-item">
                        <i class="fas fa-database"></i>
                        <h4>Database Sharding</h4>
                        <p>MongoDB, DynamoDB</p>
                    </div>
                    <div class="application-item">
                        <i class="fas fa-comments"></i>
                        <h4>Message Queues</h4>
                        <p>Apache Kafka, RabbitMQ</p>
                    </div>
                </div>
                
                <div class="example-box">
                    <strong>🏢 أمثلة من الشركات الكبيرة:</strong><br>
                    • <strong>Amazon DynamoDB:</strong> بيستخدمه لتوزيع البيانات<br>
                    • <strong>Apache Cassandra:</strong> أساس الـ partitioning strategy<br>
                    • <strong>Memcached:</strong> لتوزيع الـ cache keys<br>
                    • <strong>Chord Protocol:</strong> في الـ P2P networks
                </div>
                
                <div class="success-box">
                    <strong>💡 نصيحة:</strong> استخدم Consistent Hashing في أي نظام محتاج يوزع البيانات أو الطلبات على servers متعددة!
                </div>
            </div>

            <!-- Best Practices -->
            <div class="card best-practices">
                <div class="card-icon">
                    <i class="fas fa-star"></i>
                </div>
                <h2>Best Practices 💯</h2>
                <p>نصائح مهمة عشان تستخدم Consistent Hashing صح:</p>
                
                <div class="success-box">
                    <strong>✅ اعمل كده:</strong><br>
                    • استخدم 100-200 virtual nodes لكل server<br>
                    • اختار hash function قوي (MD5, SHA-1)<br>
                    • راقب توزيع الـ load باستمرار<br>
                    • اعمل replication للبيانات المهمة<br>
                    • استخدم consistent hashing مع caching strategies
                </div>
                
                <div class="warning-box">
                    <strong>❌ متعملش كده:</strong><br>
                    • متستخدمش virtual nodes قليلة (أقل من 50)<br>
                    • متعتمدش على server واحد للبيانات الحرجة<br>
                    • متنساش monitoring للـ hot spots<br>
                    • متستخدمش hash functions ضعيفة
                </div>
                
                <div class="code-block">
                    // مثال Implementation بسيط
                    class ConsistentHash {
                        constructor(replicas = 100) {
                            this.replicas = replicas;
                            this.ring = new Map();
                            this.sortedKeys = [];
                        }
                        
                        addServer(server) {
                            for (let i = 0; i < this.replicas; i++) {
                                const hash = this.hash(server + ':' + i);
                                this.ring.set(hash, server);
                            }
                            this.sortedKeys = [...this.ring.keys()].sort((a, b) => a - b);
                        }
                        
                        getServer(key) {
                            const hash = this.hash(key);
                            const idx = this.findNextServer(hash);
                            return this.ring.get(this.sortedKeys[idx]);
                        }
                    }
                </div>
                
                <div class="example-box">
                    <strong>🔥 Pro Tips:</strong><br>
                    • اعمل benchmarking للـ hash functions المختلفة<br>
                    • استخدم consistent hashing مع circuit breakers<br>
                    • فكر في الـ geographical distribution<br>
                    • اعمل graceful handling للـ server failures
                </div>
                
                <div class="highlight">
                    <strong>🏆 النصيحة الذهبية:</strong> "Consistency is key, but don't forget about performance!" - الثبات مهم، بس متنساش الأداء!
                </div>
            </div>
        </div>
    </div>

    <script>
        // إضافة تأثيرات تفاعلية
        document.addEventListener('DOMContentLoaded', function() {
            const cards = document.querySelectorAll('.card');
            
            // تأثير الانيميشن عند التحميل
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                
                setTimeout(() => {
                    card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 200);
            });
            
            // تأثير النقر على الكروت
            cards.forEach(card => {
                card.addEventListener('click', function() {
                    this.style.transform = 'scale(1.02)';
                    setTimeout(() => {
                        this.style.transform = 'translateY(-5px)';
                    }, 200);
                });
            });

            // تأثير دوران الـ Hash Ring
            const hashRings = document.querySelectorAll('.hash-ring');
            hashRings.forEach(ring => {
                ring.addEventListener('mouseenter', function() {
                    this.style.transform = 'rotate(10deg) scale(1.05)';
                    this.style.transition = 'transform 0.3s ease';
                });
                ring.addEventListener('mouseleave', function() {
                    this.style.transform = 'rotate(0deg) scale(1)';
                });
            });

            // تأثير hover على العناصر التفاعلية
            const interactiveItems = document.querySelectorAll('.benefit-item, .application-item');
            interactiveItems.forEach(item => {
                item.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-5px) scale(1.05)';
                });
                item.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) scale(1)';
                });
            });
        });
    </script>
</body>
</html>